{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport viser from 'viser';\n\nfunction retain(obj, attr) {\n  var newObj = Object.create(null);\n\n  for (var item in obj) {\n    if (obj.hasOwnProperty(item)) {\n      var arrAttr = Array.isArray(attr) ? attr : [attr];\n\n      if (arrAttr.indexOf(item) >= 0) {\n        newObj[item] = obj[item];\n      }\n    }\n  }\n\n  return newObj;\n}\n\nvar LiteChart = function (_super) {\n  __extends(LiteChart, _super);\n\n  function LiteChart(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.config = {};\n    _this.displayName = '';\n\n    _this.portalRef = function (container) {\n      if (!_this.container) {\n        _this.container = container;\n      }\n    };\n\n    return _this;\n  }\n\n  LiteChart.prototype.combineChartConfig = function (props, config) {\n    var chartRetain = ['height', 'width', 'animate', 'forceFit', 'background', 'plotBackground', 'padding'];\n    config.chart = retain(props, chartRetain);\n    return config;\n  };\n\n  LiteChart.prototype.combineViewConfig = function (props, config) {\n    if (props.data) {\n      config.data = props.data;\n    }\n\n    if (props.dataPre) {\n      config.dataPre = props.dataPre;\n    }\n\n    if (props.scale) {\n      config.scale = props.scale;\n    }\n\n    if (props.guide) {\n      config.guide = props.guide;\n    }\n\n    config.tooltip = props.tooltip ? props.tooltip : true;\n    config.legend = props.legend ? props.legend : true;\n    config.axis = props.axis ? props.axis : true;\n    return config;\n  };\n\n  LiteChart.prototype.combineSeriesConfig = function (props, config) {\n    var regSeries = ['pie', 'sector', 'line', 'smoothLine', 'dashLine', 'area', 'stackArea', 'smoothArea', 'bar', 'stackBar', 'dodgeBar', 'interval', 'stackInterval', 'dodgeInterval', 'point', 'waterfall', 'funnel', 'pyramid', 'radialBar', 'schema', 'box', 'candle', 'polygon', 'contour', 'heatmap', 'edge', 'jitterPoint'];\n\n    for (var _i = 0, regSeries_1 = regSeries; _i < regSeries_1.length; _i++) {\n      var res = regSeries_1[_i];\n\n      if (props[res]) {\n        config.series = __assign({}, config.series, {\n          quickType: res\n        });\n        break;\n      }\n    }\n\n    return config;\n  };\n\n  LiteChart.prototype.createChartInstance = function (config) {\n    var elm = this.elm;\n\n    if (elm) {\n      ReactDOM.unmountComponentAtNode(elm);\n    }\n\n    if (this.chart) {\n      this.chart.destroy();\n    }\n\n    this.combineChartConfig(this.props, this.config);\n    this.combineViewConfig(this.props, this.config);\n    this.combineSeriesConfig(this.props, this.config);\n    var root = document.createElement('div');\n    this.container.appendChild(root);\n    config.chart.container = root;\n    this.elm = document.createElement('div');\n    this.chart = viser(config);\n  };\n\n  LiteChart.prototype.repaintChartInstance = function (config) {\n    this.combineChartConfig(this.props, this.config);\n    this.combineViewConfig(this.props, this.config);\n    this.combineSeriesConfig(this.props, this.config);\n\n    if (this.chart) {\n      this.chart.repaint(config);\n    } else {\n      config.chart.container = this.container;\n      this.chart = viser(config);\n    }\n  };\n\n  LiteChart.prototype.clearConfigData = function () {\n    this.config = {};\n  };\n\n  LiteChart.prototype.componentDidMount = function () {\n    this.createChartInstance(this.config);\n    this.clearConfigData();\n  };\n\n  LiteChart.prototype.componentDidUpdate = function () {\n    this.repaintChartInstance(this.config);\n    this.clearConfigData();\n  };\n\n  LiteChart.prototype.componentWillUnmount = function () {\n    if (this.chart) {\n      this.chart.destroy();\n      this.chart = null;\n    }\n\n    this.elm = this.container = null;\n  };\n\n  LiteChart.prototype.render = function () {\n    return React.createElement(\"div\", {\n      ref: this.portalRef\n    }, this.props.children);\n  };\n\n  return LiteChart;\n}(React.Component);\n\nexport default LiteChart;","map":{"version":3,"sources":["../../src/components/LiteChart.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport viser from 'viser';\nfunction retain(obj, attr) {\n    var newObj = Object.create(null);\n    for (var item in obj) {\n        if (obj.hasOwnProperty(item)) {\n            var arrAttr = Array.isArray(attr) ? attr : [attr];\n            if (arrAttr.indexOf(item) >= 0) {\n                newObj[item] = obj[item];\n            }\n        }\n    }\n    return newObj;\n}\nvar LiteChart = (function (_super) {\n    __extends(LiteChart, _super);\n    function LiteChart(props) {\n        var _this = _super.call(this, props) || this;\n        _this.config = {};\n        _this.displayName = '';\n        _this.portalRef = function (container) {\n            if (!_this.container) {\n                _this.container = container;\n            }\n        };\n        return _this;\n    }\n    LiteChart.prototype.combineChartConfig = function (props, config) {\n        var chartRetain = [\n            'height',\n            'width',\n            'animate',\n            'forceFit',\n            'background',\n            'plotBackground',\n            'padding',\n        ];\n        config.chart = retain(props, chartRetain);\n        return config;\n    };\n    LiteChart.prototype.combineViewConfig = function (props, config) {\n        if (props.data) {\n            config.data = props.data;\n        }\n        if (props.dataPre) {\n            config.dataPre = props.dataPre;\n        }\n        if (props.scale) {\n            config.scale = props.scale;\n        }\n        if (props.guide) {\n            config.guide = props.guide;\n        }\n        config.tooltip = props.tooltip ? props.tooltip : true;\n        config.legend = props.legend ? props.legend : true;\n        config.axis = props.axis ? props.axis : true;\n        return config;\n    };\n    LiteChart.prototype.combineSeriesConfig = function (props, config) {\n        var regSeries = [\n            'pie',\n            'sector',\n            'line',\n            'smoothLine',\n            'dashLine',\n            'area',\n            'stackArea',\n            'smoothArea',\n            'bar',\n            'stackBar',\n            'dodgeBar',\n            'interval',\n            'stackInterval',\n            'dodgeInterval',\n            'point',\n            'waterfall',\n            'funnel',\n            'pyramid',\n            'radialBar',\n            'schema',\n            'box',\n            'candle',\n            'polygon',\n            'contour',\n            'heatmap',\n            'edge',\n            'jitterPoint',\n        ];\n        for (var _i = 0, regSeries_1 = regSeries; _i < regSeries_1.length; _i++) {\n            var res = regSeries_1[_i];\n            if (props[res]) {\n                config.series = __assign({}, config.series, { quickType: res });\n                break;\n            }\n        }\n        return config;\n    };\n    LiteChart.prototype.createChartInstance = function (config) {\n        var elm = this.elm;\n        if (elm) {\n            ReactDOM.unmountComponentAtNode(elm);\n        }\n        if (this.chart) {\n            this.chart.destroy();\n        }\n        this.combineChartConfig(this.props, this.config);\n        this.combineViewConfig(this.props, this.config);\n        this.combineSeriesConfig(this.props, this.config);\n        var root = document.createElement('div');\n        this.container.appendChild(root);\n        config.chart.container = root;\n        this.elm = document.createElement('div');\n        this.chart = viser(config);\n    };\n    LiteChart.prototype.repaintChartInstance = function (config) {\n        this.combineChartConfig(this.props, this.config);\n        this.combineViewConfig(this.props, this.config);\n        this.combineSeriesConfig(this.props, this.config);\n        if (this.chart) {\n            this.chart.repaint(config);\n        }\n        else {\n            config.chart.container = this.container;\n            this.chart = viser(config);\n        }\n    };\n    LiteChart.prototype.clearConfigData = function () {\n        this.config = {};\n    };\n    LiteChart.prototype.componentDidMount = function () {\n        this.createChartInstance(this.config);\n        this.clearConfigData();\n    };\n    LiteChart.prototype.componentDidUpdate = function () {\n        this.repaintChartInstance(this.config);\n        this.clearConfigData();\n    };\n    LiteChart.prototype.componentWillUnmount = function () {\n        if (this.chart) {\n            this.chart.destroy();\n            this.chart = null;\n        }\n        this.elm = this.container = null;\n    };\n    LiteChart.prototype.render = function () {\n        return React.createElement(\"div\", { ref: this.portalRef }, this.props.children);\n    };\n    return LiteChart;\n}(React.Component));\nexport default LiteChart;\n//# sourceMappingURL=LiteChart.js.map"]},"metadata":{},"sourceType":"module"}